<script>
    // let req = new XMLHttpRequest();
    // req.open('get', 'https://jsonplaceholder.typicode.com/posts');
    // req.send();
    // console.log(req.response);

    // req.onreadystatechange = function() {
    //     console.log('상태값: ' + this.readyState);
    //     console.log('상태값: ' + this.status);
    //     if(this.readyState === 4) {
    //          console.log(req.response);
    //     }
    // }

    // setTimeout() : 특정시간 후에 실행
    // setInterval() : 특정시간 간격 마다 계속 실행
    // setTimeout(function() {
    //     console.log('setTimeout');
    // }, 1000);
    /*
    시작버튼, 종료버튼
    시작버튼 클릭하면 1초에 1씩 증가
    종료버튼 클릭하면 중지

    중시시키는 방법 : clearInterval(매개변수)
    매개변수 = setInterval()의 리턴값
    */


    // Promise(ES8)
    function test(func) {
        return new Promise(function(resolve, reject) {
            setTimeout(function() {
                resolve("문자열");
            });
        });
    }

    test().then(function(arg) {
        console.log(arg);
    });

    console.log('main흐름');

    // 비동기를 동기적으로 처리
    async function test2() {
        let result = await test(function(arg) {
            return arg;
        });
        console.log('test2:' + result);
    };
    test2();

    //ajax
    fetch('https://jsonplaceholder.typicode.com/posts')
        .then(res=>res.json())
        .then(json=>console.log(json));
    
    window.onload = function() {
        let start = document.querySelector("#start");
        let end = document.querySelector("#end");
        let v = 0;
        start.onclick = function() {
            v = setInterval(function() {
                let cnt = Number(document.querySelector("#cnt").innerHTML);
                document.querySelector("#cnt").innerHTML = cnt + 1;
            }, 1000);
        }
        end.onclick = function() {
            clearInterval(v);
        }
    }
</script>
<div id="cnt">0</div>
<input type="button" value="시작" id="start">
<input type="button" value="종료" id="end">